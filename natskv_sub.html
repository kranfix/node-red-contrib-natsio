<!-- see: https://docs.nats.io/nats-concepts/jetstream/key-value-view -->

<script type="text/javascript">
  RED.nodes.registerType('natskv-sub', {
    category: 'NATS',
    color: '#3FADB5',
    defaults: {
      name: { value:""},
      server: { value: "", type: "natsio-server", required: true },
      view: { value: "", required: true },
      filterSubject: { value: "" },
      fetchState: { value: true },
      watch: { value: true },
      json: { value: true }
    },
    inputs: 1,
    outputs: 2,
    icon: "fa-space-shuttle.svg",
    label: function () {
      return this.name || ("natskv-sub: " + this.view+" ("+ this.filterSubject+ ")");
    },
    outputLabels: ["update", "delete"],
    inputLabels: ["trigger"]

  });
</script>

<script type="text/x-red" data-template-name="natskv-sub">
  <div class="form-row">
    <label for="node-input-server"><i class="icon-tag"></i> server</label>
    <input type="text" id="node-input-server" placeholder="server">
  </div>
  <div class="form-row">
    <label for="node-input-view"><i class="icon-tag"></i> view</label>
    <input type="text" id="node-input-view" placeholder="view">
  </div>
 
 
  <div class="form-row">
    <label for="node-input-filterSubject"><i class="icon-tag"></i> FilterSubject</label>
    <input type="text" id="node-input-filterSubject" placeholder="filterSubject">
  </div>
  
    <div class="form-row">
      <label for="node-input-fetchState">
        <i class="icon-bookmark"></i> fetchState
      </label>
      <input type="checkbox" id="node-input-fetchState">
    </div>

    <div class="form-row">
      <label for="node-input-watch">
        <i class="icon-bookmark"></i> watch
      </label>
      <input type="checkbox" id="node-input-watch">
    </div>

    <div class="form-row">
      <label for="node-input-json">
        <i class="icon-bookmark"></i> JSON mode
      </label>
      <input type="checkbox" id="node-input-json">
    </div>

    
    <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
      <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
  </div>


</script>

<script type="text/x-red" data-help-name="natskv-sub">
  <p>jetstream-sub node</p>
</script>